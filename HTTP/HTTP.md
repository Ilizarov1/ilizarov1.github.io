# HTTP/ 1.0

## 优点

- 可以发送任何格式内容
- 引入POST HEAD，丰富与服务器的互动手段
- 请求回应格式发生变化，必须包含头信息（HTTP Header）
- 新增状态码、多字符集支持、多部分发送、权限、缓存、内容编码

## 缺点

- 每个TCP连接只发送一个请求，在请求需要重新建立连接
- 由于TCP建立连接成本高，且慢开始，导致1.0性能较差
- 无状态特性，不记录cookies

# HTTP/1.1

## 优点

- 持久连接，TCP连接默认不关闭，可被多个请求复用
- 管道机制，同一个TCP连接中客户端可以同时发送多个请求
  - 通过Content-Length，区别不同回应，前提是服务器发送前知道回应的长度
  - 流模式（stream) 产生一块数据就发送一块，最后一块大小为0，用于区分(Better)
- 新增PUT PATCH OPPTIONS DELETE等动词

## 缺点

- 队头堵塞，虽然TCP连接能够复用，但是必须按照次序进行通信，如果前面的回应慢就会造成后面的回应堵塞
- 无状态，每次都需要附上cookie user agent等重复信息
- 不安全性，传输内容没有加密

## SPDY

- 谷歌推出，用于改进HTTP/1.1
- 多路复用 - 针对队头堵塞，在一个连接上无限制并发流
- 头部压缩 - 解决巨大的HTTP头部，HPACK算法，每次请求和响应只发送差异头部
- 请求优先级
- 服务端推送
- 提高安全行 - 支持使用HTTPS进行加密传输

# HTTP/2

## 优点

- 彻底的二进制协议（1.1中头部信息是文本，数据体可2可文）
- 多工，同时发送多个请求和回应
- 数据流，编号，客户端发出ID为奇数，服务端发出ID为偶数，可指定优先级
- 头部信息压缩
- 服务器推送

## 缺点

- 同一个TCP连接，同一个流量状态控制和拥塞控制，一个数据流拥塞，全部阻塞

# HTTP/3

## 优点

- 集成基于UDP的QUIC协议（集成TCP可靠传输,TLS加密,HTTP/2流量复用）
- 减少RTT

# HTTPS

## TLS

- 第一步，客户端HELLO，发起请求，包含协议版本号、一个随机数、支持的加密方法
- 第二步，服务器HELLO，确认加密方法，给出证书，一个服务器生成的随机数
- 第三步，客户端使用CA公钥确认证书有效，生成新随机数，使用证书公钥加密随机数，提供hash值，以供检验
- 第四步，服务器使用私钥解密，以及前面全部的Hash值以供检验
- 第五步，双方根据约定加密方法和三个随机数，生成对话密钥，之后使用该密钥来加密

# 常见状态码

## 1xx: 信息，服务器收到请求，要求继续操作

## 2XX：请求成功

- 200：OK

## 3XX：重定向

- 301：永久
- 302：临时
- 304：资源未被修改

## 4XX：客户端错误

- 400：请求错误，客户端请求错误，服务端无法理解
- 401：未授权
- 402：没有花钱
- 403：理解请求，但因为客户端没有权限，拒绝执行
- 404：资源未找到

## 5XX：服务端错误

- 500：服务器内部错误，无法完成请求
- 502：从远程服务器收到无效响应
- 503：超载或维护，服务器暂时无法处理请求
- 504：网关超时，没有及时获取到响应